{"version":3,"sources":["webpack:///src/components/common/viewVideo.vue","webpack:///./src/components/common/viewVideo.vue?660f","webpack:///./src/components/common/viewVideo.vue"],"names":["Tab","tab","fetchData","this","type","retureData","coverPicture","videoName","location","introduction","schduledList","playUrl","catch","err","userId","then","res","title","startTime","endTime","hlsPlayUrl","params","nameId","liveId","getSeconds","common_viewVideo","render","_vm","_h","$createElement","_c","_self","_v","staticClass","_s","liveTitle","_m","liveLocation","liveInfo","videoUrl","pushName","attrs","to","path","query","channelId","tag","_l","item","i","key","staticRenderFns","id","staticStyle","width","height","Component","__webpack_require__","normalizeComponent","viewVideo","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/25.76ecea89ef217ba62c3c.js","sourcesContent":["<template>\r\n  <div>\r\n      <Tab></Tab>\r\n      <div class=\"header\">{{liveTitle}}</div>\r\n      <div class=\"container\">\r\n           <div class=\"main\">\r\n           <div id=\"window\">\r\n           <div id=\"movie\" style=\"width:100%;height:100%\"></div>\r\n           </div>\r\n        </div>     \r\n        <div class=\"aside\">\r\n          <div class=\"section\">\r\n             <div>直播名称：{{liveTitle}}</div>\r\n             <div>开始时间：{{startTime}}</div>\r\n             <div>结束时间：{{endTime}}</div>\r\n             <div>活动地点：{{liveLocation}}</div>\r\n             <div>活动介绍：{{liveInfo}}</div>\r\n          </div>\r\n            <div class=\"section\">\r\n            <div>直播流URL:</div>\r\n            <div>{{videoUrl}}</div>\r\n            <div>直播流名称:</div>\r\n            <div>{{videoName}}</div>\r\n             <div>推流URL:</div>\r\n            <div>{{videoUrl}}</div>\r\n            <div>推流名称:</div>\r\n            <div>{{pushName}}</div>\r\n            <div>\r\n               <router-link  :to=\"{ path: 'viewMobile', query: { channelId: channelId}}\" tag=\"div\" class=\"mobile\">前往手机端</router-link>\r\n            </div>  \r\n          </div>\r\n          <div class=\"section\">\r\n             <div>节目单</div>\r\n                <div  :key=\"i\" v-for=\"(item,i) in schduledList\">{{item}}</div>\r\n          </div>\r\n        </div>\r\n       \r\n      </div>  \r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\nimport Tab from 'components/common/tab'\r\nimport liveHandler from 'store/liveInfo.js'\r\n    export default{\r\n        data(){\r\n            return{\r\n                name:\"\",   //name刷新了就没有了，因此需要存储cookie和localStorage\r\n                videoPic:\"\",\r\n                videoUrl:\"\",\r\n                videoName:'',\r\n                liveTitle:'',\r\n                startTime:'',\r\n                endTime:'',\r\n                liveLocation:'',\r\n                liveInfo:'',\r\n                pushUrl:'',\r\n                pushName:'',\r\n                schduledList:'',\r\n                channelId:\"\",\r\n                type:'',\r\n                playUrl:''\r\n            }\r\n        },\r\n      components:{                                                                                                                                                                                                                                                                                                                                                                                                                                                                   \r\n         Tab\r\n      },\r\n    created(){\r\n       this.fetchData();\r\n       this.channelId=localStorage.getItem('channelId');\r\n       var userId=sessionStorage.getItem('userId');\r\n       this.type=localStorage.getItem('type');\r\n       var that=this;\r\n       console.log(this.type)\r\n       //  点播，历史视频的获取\r\n       if(this.type==1){              //type为1说明是点播的历史视频，0代表直播\r\n        liveHandler.getDianboInfo(localStorage.getItem('liveId')).then(function(res){\r\n                //if(res.data.retureValue==0){\r\n          if(res.data.retureValue==0){\r\n                 // alert('成功')\r\n                    var videoInfo=res.data.retureData; \r\n                    that.videoPic=videoInfo.coverPicture;\r\n                   // that.videoUrl=videoInfo.hlsPlayUrl;\r\n                    that.liveTitle=videoInfo.videoName;\r\n                    that.startTime=that.timestampToTime(videoInfo.startTime*1000);\r\n                    that.endTime=that.timestampToTime(videoInfo.endTime*1000);\r\n                    that.liveLocation=videoInfo.location;\r\n                    that.liveInfo=videoInfo.introduction;\r\n                   // that.pushUrl=videoInfo.pushUrl;\r\n                    that.schduledList=videoInfo.schduledList;\r\n                    \r\n                    that.playUrl=videoInfo.playUrl;                                                          \r\n                       \r\n                      let player=new TcPlayer(\"movie\",{\r\n                          //\"m3u8\":\"http://5432.liveplay.myqcloud.com/live/5432_f812bda13c8f485f83ebe7637cd9bfa0_73.m3u8\",\r\n                          \"m3u8\": that.playUrl,\r\n                          \"autoplayer\":true,\r\n                          \"coverpic\":{style:\"cover\",src:\"http://vodplayerinfo-10005041.file.myqcloud.com/3035579109/vod_paster_pause/paster_pause1469013308.jpg\"},\r\n                          \"width\":\"100%\"\r\n                     })\r\n                }\r\n                else{\r\n                  //alert(\"失败\")\r\n                  console.log(\"不知名错误\");\r\n                }\r\n\r\n        }).catch(\r\n                  function(err){\r\n                    console.log(err);\r\n                  }\r\n                );\r\n       }\r\n\r\n       // 直播的视频获取和播放\r\n       else{\r\n         liveHandler.getLiveInfo({\r\n                \"userId\":userId,\r\n                \"token\":'',\r\n                \"channelId\":localStorage.getItem('channelId'),\r\n                \"liveId\":localStorage.getItem('liveId')\r\n                }).then(function(res){\r\n\r\n                if(res.data.retureValue==0){\r\n                 // alert('成功')\r\n                    var videoInfo=res.data.retureData; \r\n                    that.videoPic=videoInfo.coverPicture;\r\n                   // that.videoUrl=videoInfo.hlsPlayUrl;\r\n                    that.liveTitle=videoInfo.title;\r\n                    that.startTime=that.timestampToTime(videoInfo.startTime);\r\n                    that.endTime=that.timestampToTime(videoInfo.endTime);\r\n                    that.liveLocation=videoInfo.location;\r\n                    that.liveInfo=videoInfo.introduction;\r\n                   // that.pushUrl=videoInfo.pushUrl;\r\n                    that.schduledList=videoInfo.schduledList;\r\n                    \r\n                    var live1Index=videoInfo.hlsPlayUrl.indexOf('live/');\r\n                    that.videoUrl=videoInfo.hlsPlayUrl.substring(0,live1Index).concat('live/');\r\n                    that.videoName=videoInfo.hlsPlayUrl.substring(live1Index+5);\r\n\r\n                    var live2Index=videoInfo.pushUrl.indexOf('live/');\r\n                    that.pushUrl=videoInfo.pushUrl.substring(0,live2Index).concat('live/');\r\n                    that.pushName=videoInfo.pushUrl.substring(live2Index+5);\r\n                 \r\n\r\n                      let player=new TcPlayer(\"movie\",{\r\n                          //\"m3u8\":\"http://5432.liveplay.myqcloud.com/live/5432_f812bda13c8f485f83ebe7637cd9bfa0_73.m3u8\",\r\n                          \"m3u8\":videoInfo.hlsPlayUrl,\r\n                          \"autoplayer\":true,\r\n                          \"coverpic\":{style:\"cover\",src:\"http://vodplayerinfo-10005041.file.myqcloud.com/3035579109/vod_paster_pause/paster_pause1469013308.jpg\"},\r\n                          \"width\":\"100%\"\r\n                     })\r\n                }\r\n                else{\r\n                  //alert(\"失败\")\r\n                  console.log(\"不知名错误\");\r\n                }\r\n                }).catch(\r\n                  function(err){\r\n                    console.log(err);\r\n                   // alert(\"创建失败.\");\r\n                  }\r\n                );\r\n\r\n         }\r\n       },\r\n      watch:{\r\n      '$route':'fetchData'\r\n      },\r\n      //   一开始将视频初始化放在这里，但是由于视频的路径等参数尚在ajax的路上，所以会GG\r\n\r\n    //   mounted:function(){\r\n    //     var that=this;\r\n    //     this.$nextTick(function(){\r\n    //       console.log(this.videoUrl)\r\n    //        let player=new TcPlayer(\"movie\",{\r\n    //  \"m3u8\":that.videoUrl,\r\n    //  \"autoplayer\":true,\r\n    //  \"coverpic\":{style:\"cover\",src:\"https://118.89.112.125:8443/xidian_live-0.0.1/\"+that.videoPic},\r\n    //  \"width\":\"100%\"\r\n    //     })\r\n    //   })\r\n    //   },\r\n      methods:{\r\n         fetchData:function(){ \r\n           console.log(this.$route.params);\r\n           if(this.$route.params.nameId){       // 为空的时候不重新设置各种ID，比如从手机端返回，这里可能为空，因为路径跳转没有带参数\r\n              this.name=this.$route.params.nameId;\r\n              if(this.$route.params.type==\"学术\"){\r\n                  localStorage.setItem('type',1);\r\n              } \r\n              if(!this.$route.params.type){\r\n                localStorage.setItem('type',0);\r\n              }\r\n              localStorage.setItem('liveId',this.$route.params.liveId)\r\n           } \r\n        },\r\n        timestampToTime:function(timestamp) {   //时间戳换为时间\r\n          var date = new Date(timestamp);//时间戳为10位需*1000，时间戳为13位的话不需乘1000，我们是13位\r\n          var Y = date.getFullYear() + '-';\r\n          var M = (date.getMonth()+1 < 10 ? '0'+(date.getMonth()+1) : date.getMonth()+1) + '-';\r\n          var D = date.getDate() + ' ';\r\n          var h = date.getHours() + ':';\r\n          var m = date.getMinutes() + ':';\r\n          var s = date.getSeconds();\r\n          return Y+M+D+h+m+s;\r\n      }\r\n      }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\r\n    .header\r\n      width:20vw\r\n      height:10vh\r\n      position absolute\r\n      margin-top:5vh\r\n      margin-left 5vw\r\n      color:black\r\n      font-size: 2vw   \r\n    .container\r\n      width:80vw\r\n      height:100vh\r\n      margin:0 auto\r\n      margin-top:8vh\r\n      display flex\r\n      .main\r\n        flex: 0 0 80%\r\n        height: 100%\r\n        z-index :15\r\n        overflow hidden\r\n        margin-left:0.5rem\r\n        #window \r\n          border:2px solid #787D7B\r\n          width:95%\r\n          height:80%\r\n          margin:0 auto\r\n          margin-top:7vh\r\n      .aside\r\n        flex:0 0 20%\r\n        width: 25%\r\n        height: 100vh\r\n        float: right\r\n        margin-left:1%\r\n        display:flex\r\n        flex-direction:column\r\n        .section\r\n          flex:1\r\n          width: 100%\r\n          margin:0 0 1rem 0\r\n          background-color: #fff\r\n          border:1px solid gray\r\n          text-align left\r\n          padding:10px;\r\n          white-space: pre-wrap;      //保留空白符序列，但是正常地进行换行。\r\n          word-wrap:break-word;       //在长单词或 URL 地址内部进行换行\r\n          &:hover\r\n            transform: translateY(-3px);\r\n            box-shadow: 1px 1px 20px #999;\r\n        .section:last-child\r\n          margin-bottom:0\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/common/viewVideo.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Tab'),_vm._v(\" \"),_c('div',{staticClass:\"header\"},[_vm._v(_vm._s(_vm.liveTitle))]),_vm._v(\" \"),_c('div',{staticClass:\"container\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"aside\"},[_c('div',{staticClass:\"section\"},[_c('div',[_vm._v(\"直播名称：\"+_vm._s(_vm.liveTitle))]),_vm._v(\" \"),_c('div',[_vm._v(\"开始时间：\"+_vm._s(_vm.startTime))]),_vm._v(\" \"),_c('div',[_vm._v(\"结束时间：\"+_vm._s(_vm.endTime))]),_vm._v(\" \"),_c('div',[_vm._v(\"活动地点：\"+_vm._s(_vm.liveLocation))]),_vm._v(\" \"),_c('div',[_vm._v(\"活动介绍：\"+_vm._s(_vm.liveInfo))])]),_vm._v(\" \"),_c('div',{staticClass:\"section\"},[_c('div',[_vm._v(\"直播流URL:\")]),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.videoUrl))]),_vm._v(\" \"),_c('div',[_vm._v(\"直播流名称:\")]),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.videoName))]),_vm._v(\" \"),_c('div',[_vm._v(\"推流URL:\")]),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.videoUrl))]),_vm._v(\" \"),_c('div',[_vm._v(\"推流名称:\")]),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.pushName))]),_vm._v(\" \"),_c('div',[_c('router-link',{staticClass:\"mobile\",attrs:{\"to\":{ path: 'viewMobile', query: { channelId: _vm.channelId}},\"tag\":\"div\"}},[_vm._v(\"前往手机端\")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"section\"},[_c('div',[_vm._v(\"节目单\")]),_vm._v(\" \"),_vm._l((_vm.schduledList),function(item,i){return _c('div',{key:i},[_vm._v(_vm._s(item))])})],2)])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main\"},[_c('div',{attrs:{\"id\":\"window\"}},[_c('div',{staticStyle:{\"width\":\"100%\",\"height\":\"100%\"},attrs:{\"id\":\"movie\"}})])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-466f0336\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/components/common/viewVideo.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-466f0336\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=0!./viewVideo.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./viewVideo.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./viewVideo.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-466f0336\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./viewVideo.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-466f0336\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/common/viewVideo.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}